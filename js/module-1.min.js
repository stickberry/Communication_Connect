(function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");b.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return b}if("function"===typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();
function module1(){var a=this;this.p={};this.zoom=1;this.stage=new PIXI.Container;this.mouse={};this.line={posY:{},opacity:{}};this.text={posY:{},ratioX:{},originY:0};this.sprites={bg:[],mid:[],front:[],text:[],line:[]};this.groups={back:new PIXI.Container,front:new PIXI.Container,text:new PIXI.Container};this.renderer;this.textures;this.nbSprites={bg:6,mid:3,front:1,text:3};this.scrollCap={};this.pause=!1;this.blurIntensity=3;this.blurPercent=.7;this.blur={front:0,back:0};this.origin={};this.anchor=
{x:.5,y:.5};this.basePath="/wp-content/themes/expedition2017";this.jsonSpritePath=this.basePath+"/sprites/module1-large.json";this.renderView=$$.id("montagne");this.audio=$$.first("#montagne ~ audio");this.start=function(){a.init.data();a.init.objects();a.init.events();a.load()};this.init=new function(){this.data=function(){a.p.center={x:a.renderView.clientWidth/2,y:a.renderView.clientHeight/2};a.p.winSize={x:a.renderView.clientWidth,y:a.renderView.clientHeight};a.p.screenRatio=a.p.winSize.y/980;
a.p.scale_sprite=a.p.screenRatio;a.origin.y=a.p.center.y;a.scrollCap.percent=40;a.scrollCap.cap=a.scrollCap.percent/100*a.p.winSize.x;a.scrollCap.coeff=3;a.mouse.x=a.p.center.x;a.mouse.y=a.origin.y;a.mouse.vx=0;a.mouse.vy=0;a.blur.front=0;a.blur.back=0;a.text.posY[1]=-100*a.p.scale_sprite;a.text.posY[2]=0*a.p.scale_sprite;a.text.posY[3]=100*a.p.scale_sprite;a.text.ratioX[1]=0;a.text.ratioX[2]=19;a.text.ratioX[3]=-17;a.text.originY=100;a.line.posY[0]=60*a.p.scale_sprite;a.line.posY[1]=45*a.p.scale_sprite;
a.line.posY[2]=60*a.p.scale_sprite;a.line.opacity[0]=1;a.line.opacity[1]=1;a.line.opacity[2]=.45};this.objects=function(){a.renderer=PIXI.autoDetectRenderer(a.p.winSize.x,a.p.winSize.y,{view:document.getElementById("montagne"),transparent:!0});a.renderer.autoResize=!1};this.events=function(){var b=document.getElementById("mod1");b.on("mousemove",a.events.mousemove,!1);b.on("mouseout",a.events.mouseout,!1);b.on("mouseover",a.events.mouseover,!1);window.addEventListener("resize",a.events.resize);window.addEventListener("scroll",
a.events.audioScroll);window.addEventListener("scroll",a.events.domscroll)};return this};this.music=new function(){this.playing=!1;this.start=function(){a.audio.volume=0;a.audio.play();a.music.playing=!0;TweenMax.to(a.audio,10,{volume:1})};this.stop=function(){a.audio.volume=1;a.music.playing=!1;TweenMax.to(a.audio,5,{volume:0,onComplete:function(){a.audio.pause()}})}};this.events=new function(){this.mousemove=function(b){a.mouse["in"]&&(a.mouse.x=b.clientX,a.mouse.y=b.clientY)};this.mouseout=function(){a.mouse["in"]=
!1;a.mouse.x=a.p.center.x;a.mouse.y=a.origin.y};this.mouseover=function(b){a.mouse["in"]=!0;a.mouse.x=b.clientX;a.mouse.y=b.clientY};this.touchmove=function(b){a.mouse["in"]&&(b.preventDefault(),a.mouse.x=b.touches[0].clientX,a.mouse.y=b.touches[0].clientY)};this.touchend=function(){a.mouse["in"]=!1;a.mouse.x=a.p.center.x;a.mouse.y=a.origin.y};this.touchstart=function(b){a.mouse["in"]=!0;a.mouse.x=b.touches[0].clientX;a.mouse.y=b.touches[0].clientY};this.resize=function(){clearTimeout(a.resizeT);
a.isResizing=!0;a.init.data();a.renderer.resize(a.renderView.clientWidth,a.renderView.clientHeight);a.resetSprites.background();a.resetSprites.midground();a.resetSprites.foreground();a.resetSprites.text();a.resizeT=setTimeout(function(){a.isResizing=!1},250)};this.audioScroll=function(){(0<document.body.scrollTop||0<document.documentElement.scrollTop)&&a.music.playing?a.music.stop():0!=document.body.scrollTop||0!=document.documentElement.scrollTop||a.music.playing||a.music.start()};this.domscroll=
function(b){$$.inView(a.renderView)?a.pause=!1:a.pause=!0};return this};this.load=function(){PIXI.loader.add(a.jsonSpritePath).load(a.setup)};this.setup=function(){console.log("test");setTimeout(function(){var a=new CustomEvent("module1_init");document.dispatchEvent(a)},0);a.textures=PIXI.loader.resources[a.jsonSpritePath].textures;a.addSprites.background();a.addSprites.midground();a.addSprites.foreground();a.addSprites.text();a.stage.addChild(a.groups.back);a.stage.addChild(a.groups.front);a.stage.addChild(a.groups.text);
0==document.body.scrollTop&&a.music.start();a.renderLoop()};this.addSprites=new function(){this.background=function(){for(var b=0;b<a.nbSprites.bg;b++)a.sprites.bg.push(new PIXI.Sprite(a.textures["bg-"+(b+1)+".png"])),a.sprites.bg[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.bg[b].scale.set(a.p.scale_sprite),a.sprites.bg[b].x=a.p.center.x,a.sprites.bg[b].y=a.origin.y,a.groups.back.addChild(a.sprites.bg[b])};this.midground=function(){for(var b=0;b<a.nbSprites.mid;b++)a.sprites.mid.push(new PIXI.Sprite(a.textures["mid-"+
(b+1)+".png"])),a.sprites.mid[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.mid[b].scale.set(a.p.scale_sprite),a.sprites.mid[b].x=a.p.center.x,a.sprites.mid[b].y=a.origin.y,a.groups.back.addChild(a.sprites.mid[b])};this.foreground=function(){for(var b=0;b<a.nbSprites.front;b++)a.sprites.front.push(new PIXI.Sprite(a.textures["front-"+(b+1)+".png"])),a.sprites.front[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.front[b].scale.set(a.p.scale_sprite),a.sprites.front[b].x=a.p.center.x,a.sprites.front[b].y=
a.origin.y,a.groups.front.addChild(a.sprites.front[b])};this.text=function(){for(var b=0;b<a.nbSprites.text;b++)a.sprites.text.push(new PIXI.Sprite(a.textures["text-"+(b+1)+".svg"])),a.sprites.text[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.text[b].scale.set(a.p.scale_sprite),a.sprites.text[b].x=a.p.center.x,a.sprites.text[b].y=a.p.center.y+a.text.originY+a.text.posY[b+1],a.groups.text.addChild(a.sprites.text[b]),a.sprites.line.push(new PIXI.Sprite(a.textures["line-"+(b+1)+".svg"])),a.sprites.line[b].anchor.set(a.anchor.x,
a.anchor.y),a.sprites.line[b].scale.set(a.p.scale_sprite),a.sprites.line[b].alpha=a.line.opacity[b],a.sprites.line[b].x=a.p.center.x,a.sprites.line[b].y=a.sprites.text[b].y+a.line.posY[b],a.groups.text.addChild(a.sprites.line[b])};return this};this.resetSprites=new function(){this.background=function(){for(var b=0;b<a.nbSprites.bg;b++)a.sprites.bg[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.bg[b].scale.set(a.p.scale_sprite),a.sprites.bg[b].x=a.p.center.x,a.sprites.bg[b].y=a.origin.y};this.midground=
function(){for(var b=0;b<a.nbSprites.mid;b++)a.sprites.mid[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.mid[b].scale.set(a.p.scale_sprite),a.sprites.mid[b].x=a.p.center.x,a.sprites.mid[b].y=a.origin.y};this.foreground=function(){for(var b=0;b<a.nbSprites.front;b++)a.sprites.front[b].anchor.set(a.anchor.x,a.anchor.y),a.sprites.front[b].scale.set(a.p.scale_sprite),a.sprites.front[b].x=a.p.center.x,a.sprites.front[b].y=a.origin.y};this.text=function(){for(var b=0;b<a.nbSprites.text;b++)a.sprites.text[b].anchor.set(a.anchor.x,
a.anchor.y),a.mobile?a.sprites.text[b].scale.set(a.p.scale_sprite/4):a.sprites.text[b].scale.set(a.p.scale_sprite),a.sprites.text[b].x=a.p.center.x,a.sprites.text[b].y=a.p.center.y+a.text.originY+a.text.posY[b+1],a.sprites.line[b].anchor.set(a.anchor.x,a.anchor.y),a.mobile?a.sprites.line[b].scale.set(a.p.scale_sprite/4):a.sprites.line[b].scale.set(a.p.scale_sprite),a.sprites.line[b].alpha=a.line.opacity[b],a.sprites.line[b].x=a.p.center.x,a.sprites.line[b].y=a.sprites.text[b].y+a.line.posY[b]};return this};
this.renderLoop=function(){a.pause||(a.anim.updateVar(),a.anim.horizontalScroll(),TweenMax.to(a.sprites.bg,1,{x:a.anim.bg.posX,y:a.anim.bg.posY}),TweenMax.to(a.sprites.mid,1,{x:a.anim.mid.posX,y:a.anim.mid.posY}),TweenMax.to(a.sprites.front,1,{x:a.anim.front.posX,y:a.anim.front.posY}),TweenMax.to(a.sprites.text,1,{x:a.anim.text.posX}),a.renderer.render(a.stage));requestAnimationFrame(a.renderLoop)};this.anim=new function(){this.mousePercent={x:0,y:0};this.updateVar=function(){a.anim.mperc={x:a.mouse.x/
a.p.winSize.x*100,y:a.mouse.y/a.p.winSize.y*100}};this.bg=new function(){var b=this;b.mCoeff=.5;this.posX=function(c){return a.p.center.x+120*b.mCoeff-((c+1)/a.sprites.bg.length*a.anim.mperc.x*b.mCoeff*1.2+(3*(a.anim.mperc.x-50)+a.mouse.vx))};this.posY=function(c){return a.p.center.y-(c+1)/a.sprites.bg.length*a.anim.mperc.y*b.mCoeff};return this};this.mid=new function(){var b=this;b.mCoeff=.7;this.posX=function(c){return a.p.center.x+120*b.mCoeff-((c+1)/2*a.anim.mperc.x*b.mCoeff*1.2+(3*(a.anim.mperc.x-
50)+a.mouse.vx))};this.posY=function(c){return a.p.center.y-(c+1)/2*a.anim.mperc.y*b.mCoeff};return this};this.front=new function(){var b=this;b.mCoeff=1;this.posX=function(c){return a.p.center.x+120*b.mCoeff-((c+1)/a.sprites.front.length*a.anim.mperc.x*b.mCoeff*1.2+(3*(a.anim.mperc.x-50)+a.mouse.vx))};this.posY=function(c,e){var f=(c+1)/a.sprites.front.length*b.mCoeff,d=a.p.scale_sprite+a.anim.mperc.y/100*.1;TweenMax.to(e.scale,1,{_x:d,_y:d});return a.p.center.y-(a.anim.mperc.y*f+d*a.anim.mperc.y*
a.zoom)-20};return this};this.text=new function(){this.posX=function(b){return a.p.center.x+10*(a.mouse.x/a.p.winSize.x-.5)*a.text.ratioX[b+1]};return this};this.horizontalScroll=function(){a.mouse.vx=(a.mouse.x>a.p.winSize.x-a.scrollCap.cap||a.mouse.x<a.scrollCap.cap)&&(300<=a.mouse.vx||-300>=a.mouse.vx)?a.mouse.vx:a.mouse.x>a.p.winSize.x-a.scrollCap.cap?a.mouse.vx+(a.mouse.x-(a.p.winSize.x-a.scrollCap.cap))/a.scrollCap.cap*a.scrollCap.coeff:a.mouse.x<a.scrollCap.cap?a.mouse.vx-(1-a.mouse.x/a.scrollCap.cap)*
a.scrollCap.coeff:0};this.setBlur=function(){var b=a.mouse.y/a.p.winSize.y;b<=a.blurPercent&&(a.blur.back=(a.blurPercent-b)/a.blurPercent);a.blurFilters[1].blur=a.blur.back*a.blurIntensity;b>=a.blurPercent&&(a.blur.front=(b-a.blurPercent)/a.blurPercent);a.blurFilters[0].blur=a.blur.front*a.blurIntensity};return this};return this}
document.addEventListener("DOMContentLoaded",function(){document.addEventListener("module1_init",function(){(new module2).start();$$.id("loading").className="hidden"});if(768>=window.innerWidth)$$.id("loading").className="hidden",$$.first(".module2").style.height="auto",window.swiper||(window.swiper=new Swiper("#slideEquipeMobile",{parallax:!0,speed:600,freeMode:!0,freeModeSticky:!0,slidesPerView:"auto",centeredSlides:!0,simulateTouch:!1}));else{var a=$$.id("montagne");(a=a.getContext("webgl")||a.getContext("experimental-webgl"))?
(a=a.getParameter(a.MAX_TEXTURE_SIZE),16384<=a?(a=new module1,a.start()):4096<=a?((new module2).start(),$$.id("loading").className="hidden"):(a=new module1,a.start())):($$.id("loading").className="hidden",$$.first("#slideEquipe").style.display="none",$$.first("#slideEquipeMobile").style.display="block",$$.first("#slideEquipeMobile").style.height="auto",window.swiper||(window.swiper=new Swiper("#slideEquipeMobile",{parallax:!0,speed:600,freeMode:!0,freeModeSticky:!0,slidesPerView:"auto",centeredSlides:!0})))}});
